# Домашнее задание к занятию «Введение в микросервисы»

## Задача

Руководство крупного интернет-магазина, у которого постоянно растёт пользовательская база и количество заказов, рассматривает возможность переделки своей внутренней ИТ-системы на основе микросервисов. 

Вас пригласили в качестве консультанта для оценки целесообразности перехода на микросервисную архитектуру. 

Опишите, какие выгоды может получить компания от перехода на микросервисную архитектуру и какие проблемы нужно решить в первую очередь.

## Зачем вам это?

Для начала необходимо уточнить у бизнеса следующие моменты:
 - какую конкретную проблему он хочет решить внедрением микросервисов?
 - какие расходы (разовые и периодические) он готов понести для решения этой проблемы?
 
Если это просто стильно, модно, молодежно, у конкурентов есть - смысл перевода архитектуры на микросервисы отсутствует.
Если бюджет на обслуживание системы ввиду увеличения сложности не заложен, а из поддержки только пара фрилансеров на удаленке - смысл перевода архитектуры на микросервисы отсутствует.

Если же у бизнеса есть понимание своего продукта и представление стратегии его развития, а выгода от внедрения превышает затраты - можно рассматривать перевод архитектуры на микросервисы. Но единого решения, способного устранить или минимизировать все проблемы, нет. Необходимо изучить (хотя бы поверхностно) текущую архитектуру для выявления метрик, по которым уже настроить мониторинг. Мониторинг позволит определить "бутылочное горло" системы, а понимание архитектуры позволит подобрать степень гранулярности.

## Выгоды перехода на микросервисную архитектуру

1. Гибкость масштабирования - максимально нагруженные сервисы получат больше ресурсов и смогут масштабироваться независимо от других сервисов. А для бизнеса статьи расходов станут более прозрачными.

2. Отказоусточивость - выход из строя одного сервиса не должен обрушить остальные. На практике же отказоустойчивость - вопрос более глубокий. Условно, для администратора приложения отказоустойчивой должна быть БД. А с точки зрения пользователя, если не приходит СМС от сервиса авторизации - не работает все приложение. Он просто не может войти в личный кабинет и набрать заказов в корзину. И его не интересует, сколько экземпляров БД развернуто и на сколько микросервисов распилен монолит.

3. Гибкость разработки - разные команды могут развивать свои сервисы независимо друг от друга. Стандартом взаимодействия сервисов становится внутренний API.

4. Повышение частоты релизов - бизнес получит требуемые функции в текущий/обозримый момент и сможет адаптироваться к изменениям требований рынка.

5. Упрощение развертывания - тестирование новых функций, обновление или откат сервисов не приведет к остановке всей системы.

## Проблемы, которые необходимо учесть

1. Чрезмерное дробление на микросервисы ухудшает понимание архитектуры системы, усложняет мониторинг и увеличивает накладные расходы.

2. Увеличение затрат - внедрение микросервисов ведет к расширению стека применяемых технологий. Как следствие, необходима модернизация серверной/облачной инфраструктуры, повышение квалификации сотрудников и увеличение штата.

3. Взаимодействие между микросервисами - определение протокола коммуникации, синхронного/асинхронного режима обмена, владельцев сервиса и строгое следование описанным процедурам. Иначе продукт превратится в воз, который микросервисы лебедь, рак и щука тянут в разные стороны.

4. Своевременное документирование, актуальность документации и снижение bus-factor - система не должна быть черным ящиком, в котором что-то понимал сотрудник, уволившийся год назад.

5. Планирование миграции - определение этапов перехода при сохранении доступности функционала либо с минимальным временем простоя.